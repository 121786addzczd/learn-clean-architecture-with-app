# library-app

## プロジェクトのセットアップ
library-appディレクトリに移動した状態で、以下の手順に従ってプロジェクトをセットアップしてください。

1. .envファイルの作成
同じ階層にある.env.exampleファイルをコピーして.envを作成します。

    ```bash
    cp .env.example .env
    ```

2. パッケージのインストール
以下のコマンドで依存パッケージをインストールします。
    ```bash
     npm install
    ```

3. データベースの初期化（テーブル作成 + 初期データ投入）
以下のコマンドで Prisma のマイグレーションを適用し、データベースを初期状態にセットアップします。
    ```bash
    npx prisma migrate dev --name init
    ```
    - schema.prismaに基づいてテーブルが作成されます。
    - prisma/migrations/にマイグレーションファイルが保存され、バージョン管理されます。
    - prisma/seed.tsに定義された初期データが自動で投入されます。
    - prismaディレクトリにdev.dbファイルが作成されます。このファイルはSQLiteのローカルデータベースであり、アプリケーションの開発用データを保存します。

    初期状態に戻したい場合は以下のコマンドでデータベースを完全に初期化（テーブル再作成 + シード投入）できます。
    ```bash
    npx prisma migrate reset --force
    ```

    データベースの中身（データ）を空にして、seedを実行しないようにするには以下のコマンドで実行できます。
    ```bash
    npx prisma migrate reset --skip-seed
    ```

    #### 補足：npx prisma db pushについて
    Prisma のスキーマ定義だけを即座に反映したい場合（マイグレーションを管理せず使いたいときなど）には、以下のコマンドを使用することも可能です。
    ```bash
    npx prisma db push
    ```
    ただし、この方法は マイグレーション履歴を管理しないため、本番環境では非推奨です。
    開発環境で一時的にスキーマを即反映したい場合のみ使用してください。


## Prisma Studioを使ってデータベースをGUIで確認する
Prisma には、データベースの中身を Webブラウザ上で確認・編集できる**Prisma Studio**というツールが付属しています。

以下のコマンドをlibrary-appディレクトリで実行してください

```bash
npx prisma studio
```
実行後ブラウザが自動で起動し、テーブルごとのレコードを閲覧・追加・編集が画面上で操作できるようになります。
※ 開発用の SQLite (dev.db)に対して直接操作を行うため、本番環境では使用しないように注意してください。
